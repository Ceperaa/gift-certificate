<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <includeAll path="db-changelog-1.xml"/>

    <changeSet author="Sergey" id="1">
        <sql>
            CREATE TABLE IF NOT EXISTS public.gift_certificate
            (
            id BIGSERIAL PRIMARY KEY,
            name varchar(50) NOT NULL,
            description varchar(50) NOT NULL,
            price varchar(10) NOT NULL,
            duration smallint NOT NULL,
            create_date date NOT NULL,
            last_update_date date NOT NULL
            );

            CREATE TABLE IF NOT EXISTS public.tag
            (
            id BIGSERIAL PRIMARY KEY,
            name varchar(50) NOT NULL
            );

            CREATE TABLE IF NOT EXISTS public.gift_certificate_tag
            (
            gift_certificate_id bigint,
            tag_id bigint,
            CONSTRAINT gift_certificate FOREIGN KEY (gift_certificate_id)
            REFERENCES public.gift_certificate (id)
            ON UPDATE cascade
            ON DELETE cascade,
            CONSTRAINT tag FOREIGN KEY (tag_id)
            REFERENCES public.tag (id)
            ON UPDATE NO ACTION
            ON DELETE NO ACTION
            );
        </sql>
    </changeSet>
</databaseChangeLog>
